<?phprequire_once('inc/_init.php');require_once('inc/functions/general.php');error_reporting(E_ALL | E_STRICT);if($lghsh['Id'] == 0){	require_once('inc/functions/authorization.php'); 	$pgcontent = logform(); 	$page_title       = 'WC Terminal LogIn';	$page_description = '';	$keywords         = '';	$head_ext         = '';	require_once('inc/_shell.php'); ///	exit;	}include_once 'inc/functions.php';setlocale(LC_MONETARY, 'en_US');ini_set('memory_limit', '84M');$msg = NULL;require_once 'wconfig.php';/////////////*  ///////////////////// $csvarr = $vendor = NULL;//$FName = 'data/priclst/USCDfd.csv';$pcnt = '<style>.PrListTbl{	font-size: 11px;}</style><form action="#" method="post" name="vplist" enctype="multipart/form-data" style="margin: 20px;"><div style="float: left;"><select name="vnd"><option value="">Choose Price List</option><option value="AF">Aurafina</option><option value="CNC">CNC</option><option value="CBT">Cubitac</option><option value="FL">Featherlogde</option><option value="TSG">Forevermark</option><option value="GHI">GHI</option><option value="USCD">US Cabinet Depot (Framed)</option><option value="USCD0">US Cabinet Depot (Frameless)</option><option value="WLF">Wolf Classic</option></select>&nbsp; &nbsp;&nbsp; &nbsp;<input type="file" name="csv" id="csv" /><input type="submit" name="upfile" id="upfile" value="Open" style="padding: 1px 5px;" />&nbsp; &nbsp;</div>';$hf = $vnd = NULL;//uptable_vndpl('CNC');if(isset($_FILES['csv']) AND $_FILES['csv']['name'] AND isset($_POST['vnd']) AND $_POST['vnd']){//if(0){	$dt = NULL;	$incnt = NULL;	$gttl = 0;	$csvarr = array();	if($_FILES['csv']['error'] == 0){ // check there are no errors//		$csvarr = getcsvarr();///*//		$name = $_FILES['csv']['name'];//		$ext = strtolower(end(explode('.', $name)));//		$type = $_FILES['csv']['type'];		$tmpName = $_FILES['csv']['tmp_name'];/////////////////////////////////////////////////		if($ext === 'csv'){			if(($handle = fopen($tmpName, 'r')) !== FALSE) {				// necessary if a large csv file				set_time_limit(0);				$row = 0;				while(($data = fgetcsv($handle, 1000, ',')) !== FALSE) {					$col_count = count($data);					for($col=0; $col<$col_count; $col++){						$csvarr[$row][$col]=$data[$col];						}					$row++;					}				fclose($handle);				}//		}       ////////// */	}		$pi = $vi = 0;$lst = 0;$lnd = 4000;$vnd = (isset($_POST['vnd']))?$_POST['vnd']:NULL;$pcnt .= '<div style="clear: both; padding-top: 50px;"><input type="submit" name="UpTbl" value="Submit Price List - '.$vnd.'" style="padding: 3px 9px;" /></div><table class="PrListTbl">';if($vnd=='AF'){     /////////////////////////////////     AU //////////////////////////////////////////////	$pi = 0;//	$larr=array('HB', 'PW', 'RW', 'OHG');		foreach($csvarr as $csvrow){		if(!$csvrow[0])	{ continue; }				$skuv = $csvrow[0];		$ln = NULL;		if(preg_match('/HB$/', $skuv)){ $ln='HB'; }		if(preg_match('/PW$/', $skuv)){ $ln='PW'; }		if(preg_match('/RW$/', $skuv)){ $ln='RW'; }		if(preg_match('/OHG$/', $skuv)){ $ln='OHG'; }		$sku  = 'A-'.$skuv;		$price = $csvrow[1];				$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$skuv.'</td>	<td>'.$ln.'</td>	<td>'.$sku.'</td>	<td>'.$price.'</td></tr>';					$hf .= $skuv.'::'.$ln.'::'.''.'::'.''.'::'.$sku.'::'.$price.'::'.''.'::'.''.'---';					}	}if($vnd=='CNC'){     /////////////////////////////////     CNC //////////////////////////////////////////////	$prc = 0;	$hfr = array();	$tmpr = array();	$dblcnt = 0;$lns = array('C4','CR4','EB02','EB10','EB21','EB22','EB23','EBR02','EBR10','EBR21','EBR22','EBR23','FB10','FB21','FBR10','FBR21','GABO','GAB','GBWO','GBW','GCWO','GCWS','GCW','GGWS','GGW','GTSO','GTS','GUTO','GWTO','GWT','L02','LR02','L10','L11','LR11','LR10','M14','M15','M18','M19','MT2','MT3','MTS2','PB10','PB21','PBR10','PBR21','RB10','RB23','RBR10','RBR23','VG10','VG11','VG22','VG26','VGR10','VGR11','VGR22','VGR26','CT','DISP');	foreach($csvarr as $csvrow){		if(	!$csvrow[0])	{ break; }			$ln = $csvrow[0];		//		echo in_array($ln, $lns).' -  - <br>';			$bst = NULL;			$lpr = NULL;//			$vst = (in_array($ln, $lns))?'#090':'#f00';			$ttl = preg_replace('/[\W]{1,5}/',' ',$csvrow[4]);			$ttl = ucwords(strtolower($ttl));			$ttl = preg_replace('/^[\s]{1,4}/','',$ttl);			$ttl = preg_replace('/[\s]{1,4}$/','',$ttl);		if(preg_match('/^RTA - /', $csvrow[4]) OR preg_match('/([\w]{1,2})(R)([\d]{1,2})/',$ln)){ $lpr = $csvrow[7]; 			if(!preg_match('/R/',$ln)){ $bst = 'color: #f00'; }			}/*$lnb = NULL;	if(preg_match('/(C)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(EB)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(FB)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(HB)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(PB)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(RB)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(VB)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(VG)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(L)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(S)([\d]{1,5})/', $ln, $m) OR	   preg_match('/(M)([\d]{1,5})/', $ln, $m)	){	$lnb = $m[1].'-'.$m[2];		}		*/		$sku   = (isset($csvrow[2]))?$csvrow[2]:NULL;		$sku   = preg_replace('/[\”\*]/','',$sku);			$skuwc = $ln . '-' . $csvrow[1];			$prc = $csvrow[7];$tmpst = 'fff';			$prcpr = floatval($prc);			$skupr = $vipr = NULL;			if($sku!=''){				if(array_search($sku, $tmpr)){ $tmpst = 'ff0'; $dblcnt++; continue; }				array_push($tmpr, $sku);					//			$skupr = $sku;	//			$hf .= $sku.'::'.$prcpr.'---';if($ln==$lns[60]){array_push($hfr, $sku.'::'.$ln.'::'.$ttl.'::'.''.'::'.$skuwc.'::'.$prcpr.'::0::'.$csvrow[3]);	}				$vipr = ++$vi;				}			$hf = join('---', $hfr);			$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td style="background: #'.$tmpst.';">'.$sku.'</td>	<td>'.$prc.'</td>	<td style="width: 180px; color: #999;">'.$csvrow[3].'</td>	<td style="width: 650px; color: #999;">'.$ttl.'</td>	<td style="width: 150px; color: #999;">'.$ln.'</td>	<td style="width: 80px;'.$bst.'">'.$lpr.'</td>	<td></td>	<td></td></tr>';		} // echo $dblcnt.'<br><br>';// drc($tmpr);	}	if($vnd=='CBT'){     /////////////////////////////////     CBT ///////////////////////////////////////////////*	$larr = array();	$larr['B'] = array('BLR','BLO','BPR','BPO');	$larr['P'] = array('ED','CD','CN','LM','LD','LN','SD','SM');	$larr['I'] = array('CBG','ISB','ILB','LNPG','LNSG','LNCG');	foreach($csvarr as $csvrow){		$ii=2;		if($csvrow[11]){			$ttl = preg_replace('/\"/',' inch',$csvrow[1]);			foreach($larr[$csvrow[11]] as $ln){				$skuv = $csvrow[0];				$sku  = $ln.'-'.$csvrow[0];				$price = $csvrow[$ii];				$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$skuv.'</td>	<td>'.$ln.'</td>	<td>'.$sku.'</td>	<td>'.$ttl.'</td>	<td>'.$price.'</td></tr>';			$ii++;				$hf .= $skuv.'::'.$ln.'::'.$ttl.'::'.$sku.'::'.$price.'::'.''.'::'.''.'---';					}			}		}//////////////////////  */	$larr = array();	// $larr['B'] = array('BLR','BLO','BPR','BPO');	// $larr['IP'] = array('ED','CD','CN','LM','LD','LN','SD','SM');	// $larr['I'] = array('CBG','ISB','ILB','LNPG','LNSG','LNCG');	$larr[1] = array('CD','CN');	$larr[2] = array('LD','SD','LM','SM','LN');	$larr[3] = array('CBG');	$larr[4] = array('ILB','ISB');	$larr[5] = array('LNCG','LNPG','LNSG');	$larr[6] = array('LMD');	$larr[7] = array('DMD','MMD');	$larr[8] = array('BLR','BPR');	$larr[9] = array('BLO','BPO');//$ln = NULL;	$ttl = NULL;	foreach($csvarr as $csvrow){		if($csvrow[0]!=NULL AND $csvrow[1]==NULL AND $csvrow[8]==NULL){ $ttl=preg_replace('/[\”\"]{1,5}/', 'in', $csvrow[0]); }//		$ttl = preg_replace('/[\"]/', '', $ttl);		$ttl = preg_replace('/[\&]/', 'and', $ttl);		for($ii=0;$ii<=9;$ii++){			if($csvrow[$ii]>0){				foreach($larr[$ii] as $ln){					$skuv = $csvrow[0];					$sku  = strtoupper($ln.'-'.$csvrow[0]);					$price = $csvrow[$ii];					$udata = NULL;					if(preg_match('/WALL CABINET/',$ttl)){ $udata = 'WALL CABINET'; }					if(preg_match('/GLASS DOOR/',$ttl)){ $udata = 'GLASS DOOR'; }					if(preg_match('/MICROWAVE CABINET/',$ttl)){ $udata = 'MICROWAVE CABINET'; }					if(preg_match('/SINGLE DOOR CABINET/',$ttl)){ $udata = 'SINGLE DOOR CABINET'; }					if(preg_match('/DOUBLE DOOR CABINET/',$ttl)){ $udata = 'DOUBLE DOOR CABINET'; }					if(preg_match('/CORNER CABINET/',$ttl)){ $udata = 'CORNER CABINET'; }					if(preg_match('/COUNTER CABINET/',$ttl)){ $udata = 'COUNTER CABINET'; }					if(preg_match('/PLATE RACK CABINET/',$ttl)){ $udata = 'PLATE RACK CABINET'; }					if(preg_match('/OPEN CABINET/',$ttl)){ $udata = 'OPEN CABINET'; }					if(preg_match('/BASE CABINET/',$ttl)){ $udata = 'BASE CABINET'; }					if(preg_match('/SINK BASE/',$ttl)){ $udata = 'SINK BASE'; }					if(preg_match('/LAZY SUSAN/',$ttl)){ $udata = 'LAZY SUSAN'; }					if(preg_match('/OVEN CABINET/',$ttl)){ $udata = 'OVEN CABINET'; }					if(preg_match('/ANGLE CABINET/',$ttl)){ $udata = 'ANGLE CABINET'; }					if(preg_match('/SPICE CABINET/',$ttl)){ $udata = 'SPICE CABINET'; }					if(preg_match('/SINK CABINET/',$ttl)){ $udata = 'SINK CABINET'; }					if(preg_match('/UTILITY CABINET/',$ttl)){ $udata = 'UTILITY CABINET'; }					if(preg_match('/VANITY/',$ttl)){ $udata = 'VANITY'; }					if(preg_match('/LINEN CABINET/',$ttl)){ $udata = 'LINEN CABINET'; }					if(preg_match('/WASTE BASKET/',$ttl)){ $udata = 'WASTE BASKET'; }					if(preg_match('/SPICE PULL OUT/',$ttl)){ $udata = 'SPICE PULL OUT'; }					if(preg_match('/CUTLERY DIVIDER/',$ttl)){ $udata = 'CUTLERY DIVIDER'; }					if(preg_match('/TILT OUT TRAY/',$ttl)){ $udata = 'TILT OUT TRAY'; }					if(preg_match('/CORNER ORGANIZER/',$ttl)){ $udata = 'CORNER ORGANIZER'; }					if(preg_match('/PULL OUT SHELVES/',$ttl)){ $udata = 'PULL OUT SHELVES'; }					if(preg_match('/DESK DRAWER/',$ttl)){ $udata = 'DESK DRAWER'; }					if(preg_match('/STEM GLASS RACK/',$ttl)){ $udata = 'STEM GLASS RACK'; }					if(preg_match('/WINE CUBBY/',$ttl)){ $udata = 'WINE CUBBY'; }					if(preg_match('/APPLIANCE GARAGE/',$ttl)){ $udata = 'APPLIANCE GARAGE'; }					if(preg_match('/RANGE HOODS/',$ttl)){ $udata = 'RANGE HOODS'; }					if(preg_match('/WALL FILLER/',$ttl)){ $udata = 'WALL FILLER'; }					if(preg_match('/TALL FILLER/',$ttl)){ $udata = 'TALL FILLER'; }					if(preg_match('/BASE FILLER/',$ttl)){ $udata = 'BASE FILLER'; }					if(preg_match('/FLUTED FILLER/',$ttl)){ $udata = 'FLUTED FILLER'; }					if(preg_match('/DISHWASHER RETURN/',$ttl)){ $udata = 'DISHWASHER RETURN'; }					if(preg_match('/END PANEL/',$ttl)){ $udata = 'END PANEL'; }					if(preg_match('/PLYWOOD/',$ttl)){ $udata = 'PLYWOOD'; }					if(preg_match('/SKIN/',$ttl)){ $udata = 'SKIN'; }					if(preg_match('/COLUMN/',$ttl)){ $udata = 'COLUMN'; }					if(preg_match('/MOLDING/',$ttl)){ $udata = 'MOLDING'; }					if(preg_match('/TOE KICK/',$ttl)){ $udata = 'TOE KICK'; }					if(preg_match('/VALANCE/',$ttl)){ $udata = 'VALANCE'; }					if(preg_match('/DECORATIVE DOOR/',$ttl)){ $udata = 'DECORATIVE DOOR'; }					if(preg_match('/POST/',$ttl)){ $udata = 'POST'; }					if(preg_match('/SPINDLE/',$ttl)){ $udata = 'SPINDLE'; }					if(preg_match('/CORBEL/',$ttl)){ $udata = 'CORBEL'; }					if(preg_match('/BUN FEET/',$ttl)){ $udata = 'BUN FEET'; }					if(preg_match('/GLASS SHELVES/',$ttl)){ $udata = 'GLASS SHELVES'; }					if(preg_match('/FLOATING SHELVES/',$ttl)){ $udata = 'FLOATING SHELVES'; }					if(preg_match('/SHELF/',$ttl)){ $udata = 'SHELF'; }					if(preg_match('/TOUCH UP KIT/',$ttl)){ $udata = 'TOUCH UP KIT'; }					if(preg_match('/FARM SINK/',$ttl)){ $udata = 'FARM SINK'; }					if(preg_match('/VANITY SINK/',$ttl)){ $udata = 'VANITY SINK'; }					if(preg_match('/HORIZONTAL CABINET/',$ttl)){ $udata = 'HORIZONTAL CABINET'; }					$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$skuv.'</td>	<td>'.$ln.'</td>	<td>'.$sku.'</td>	<td>'.$ttl.'</td>	<td>'.$price.'</td>	<td>'.$udata.'</td></tr>';								$hf .= $skuv.'::'.$ln.'::'.$ttl.'::'.''.'::'.$sku.'::'.$price.'::0::'.$udata.'---';						}				}			}														// if($csvrow[8]>0){			// $ttl = ''; //preg_replace('/\"/',' inch',$csvrow[1]);				// $skuv = $csvrow[0];				// $ln   = '';				// $sku  = $ln.'-'.$csvrow[0];				// $price = $csvrow[8];				// $pcnt .= '// <tr><td style="color: #999;">'.++$pi.'.</td>	// <td>'.$skuv.'</td>	// <td>'.$ln.'</td>	// <td></td>	// <td>'.$ttl.'</td>	// <td>'.$price.'</td>// </tr>';			// //$ii++;				// $hf .= $skuv.'::'.$ln.'::'.$ttl.'::'.$sku.'::'.$price.'::'.''.'::'.''.'---';				// }		// if($csvrow[9]>0){			// $ttl = ''; //preg_replace('/\"/',' inch',$csvrow[1]);				// $skuv = $csvrow[0];// //				$sku  = $ln.'-'.$csvrow[0];				// $price = $csvrow[9];				// $pcnt .= '// <tr><td style="color: #999;">'.++$pi.'.</td>	// <td>'.$skuv.'</td>	// <td>'.$ln.'</td>	// <td></td>	// <td>'.$ttl.'</td>	// <td>'.$price.'</td>// </tr>';			// //$ii++;				// $hf .= $skuv.'::'.$ln.'::'.$ttl.'::'.$sku.'::'.$price.'::'.''.'::'.''.'---';				// }					}	}	if($vnd=='TSG'){     /////////////////////////////////     TSG Forevermark ////////////////////////////////////////////////	$lnr = array('KC', 'KM', 'KE', 'KW', 'AP', 'AW', 'MR', 'AB', 'SL', 'GW', 'TW', 'TS', 'AG', 'AN', 'TG', 'TQ', 'VW');//	$lnr = array('KC', 'KM', 'KE', 'KW', 'VW', 'AP', 'AW', 'AX', 'MR', 'AB', 'SL', 'GW', 'TW', 'TS', 'AG', 'AN', 'TG', 'TQ');	$lnr = array('AP', 'AW', 'AB', 'AX', 'SL', 'GW', 'TW', 'TS', 'AG', 'AN', 'TG', 'TQ', 'VW');	$prc = 0;	$hfr = array();		foreach($csvarr as $csvrow){		if(	!$csvrow[0])	{ continue; }				$sku   = (isset($csvrow[0]))?$csvrow[0]:NULL;		$sku   = preg_replace('/[\”\*]/','',$sku);		foreach($lnr as $lk=>$ln){ //echo $lk .'<br>';			if(!isset($csvrow[$lk+1]) OR !is_numeric($csvrow[$lk+1]))	{ continue; }			$skuwc = $ln . '-' . $sku;			$prc = (isset($csvrow[$lk+1]))?$csvrow[$lk+1]:0;			$prcpr = floatval($prc);			$skupr = $vipr = NULL;			if($sku!='' AND is_numeric($prcpr)){	//			$skupr = $sku;	//			$hf .= $sku.'::'.$prcpr.'---';				array_push($hfr, $sku.'::'.$ln.'::'.''.'::'.''.'::'.$skuwc.'::'.$prcpr.'::'.'0'.'::'.''.'---');					$vipr = ++$vi;				}			$hf = join('---', $hfr);			$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$sku.'</td>	<td>'.$prc.'</td>	<td style="width: 80px;">'.$ln.'</td>	<td style="width: 50px; color: #999;"></td>	<td>'.$skuwc.'</td>	<td>'.$prcpr.'</td></tr>';			}		}	}	if($vnd=='FL'){ //////////////////////////////////////  Horning Featherlogde ////////////////////////////////////////////////		foreach($csvarr as $csvrow){		$sku   = (isset($csvrow[1]))?$csvrow[1]:NULL;		$ln    = ($sku)?substr($sku, -3):NULL;		$skuwc = preg_replace("/$ln/","-$ln",$sku);		$skuwc = preg_replace('/--/','-',$skuwc);		$skuwc = preg_replace('/^-/','',$skuwc);		if(preg_match('/^JK/',$sku) OR preg_match('/^SCH/',$sku) OR preg_match('/^-SCG/',$sku)){ $skuwc = $sku; }		$price = (isset($csvrow[3]))?$csvrow[3]:NULL;		$prcpr = (preg_match('/\$/',$price))?floatval(preg_replace('/[\$\,]*/','',$price)):NULL;		$skupr = $vipr = NULL;		if($sku!='' AND is_numeric($prcpr)){//			$skupr = $sku;//			$hf .= $sku.'::'.$prcpr.'---';			$hf .= $sku.'::'.$ln.'::'.''.'::'.''.'::'.$skuwc.'::'.$prcpr.'::'.''.'::'.''.'---';				$vipr = ++$vi;			}		$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$sku.'</td>	<td>'.$price.'</td>	<td style="width: 80px;">'.$ln.'</td>	<td style="width: 50px; color: #999;">'.$vipr.'</td>	<td>'.$skuwc.'</td>	<td>'.$prcpr.'</td></tr>';		}	}	if($vnd=='GHI'){   /////////////////////////////////////////   Horning GHI ///////////////////////////////////	$hfr = array();	$hf='';	foreach($csvarr as $csvrow){		$sku   = (isset($csvrow[1]))?$csvrow[1]:NULL;		$ttl   = (isset($csvrow[2]))?$csvrow[2]:NULL;		$ttl   = preg_replace("/\"/","",$ttl);				$ln    = NULL;		// if(	preg_match('/LW$/', $sku) OR 			// preg_match('/NM$/', $sku))		{ $ln = substr($sku, -2); }		// else								{ $ln = substr($sku, -3); }$ln = substr($sku, -3);//		if($sku)?((preg_match('/LW$/', $sku))?substr($sku, -2):substr($sku, -3)):NULL;		$sku = preg_replace("/^F/","G",$sku);		$skuwc = preg_replace("/$ln/","-$ln",$sku);		$skuwc = preg_replace('/--/','-',$skuwc);		$skuwc = preg_replace('/-R-/','R-',$skuwc);		$skuwc = preg_replace('/-L-/','L-',$skuwc);		$skuwc = preg_replace('/^-/','',$skuwc);		if(preg_match('/^JK/',$sku) OR preg_match('/^SCH/',$sku) OR preg_match('/^-SCG/',$sku)){ $skuwc = $sku; }//		$skuwc = (preg_match('/^JK/',$skuwc) OR preg_match('/^SCH/',$skuwc) OR preg_match('/^-SCG/',$skuwc))?preg_replace("/-/","",$skuwc):$skuwc;		$price = (isset($csvrow[3]))?$csvrow[3]:NULL;		$prcpr = (preg_match('/\$/',$price))?floatval(preg_replace('/[\$\,]*/','',$price)):NULL;		$skupr = $vipr = NULL;		if($sku!='' AND is_numeric($prcpr)){//			$skupr = $sku;//			$hf .= $sku.'::'.$prcpr.'---';//			array_push($hfr, $sku.'::'.$ln.'::'.''.'::'.$skuwc.'::'.$prcpr.'::'.'0'.'::'.''.'::'.''.'::'.''.'---');	//			$hf .= $sku.'::'.$ln.'::'.''.'::'.$skuwc.'::'.$prcpr.'::'.''.'::'.''.'---';				$hf .= $sku.'::'.$ln.'::'.$ttl.'::'.''.'::'.$skuwc.'::'.$prcpr.'::'.'0'.'::'.'0'.'::'.''.'::'.''.'---';				$vipr = ++$vi;			}//		$hf = join('---', $hfr);		$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$sku.'</td>	<td>'.$csvrow[2].'</td>	<td>'.$price.'</td>	<td style="width: 80px;">'.$ln.'</td>	<td style="width: 50px; color: #999;">'.$vipr.'</td>	<td>'.$skuwc.'</td>	<td>'.$ttl.'</td>	<td>'.$prcpr.'</td></tr>';		}	$pcnt .= '</table>';	}	//$lsf = preg_replace('/---/','<br>',$hf);if($vnd=='USCD'){       ////////////////////////////////////////  US Cabinet Depot (Framed)  //////////////////////////	$larr = array('SW','SA','SD','SG','SC','CW','CS','TW');	foreach($csvarr as $csvrow){ //echo $csvrow[0].'<br>';		if(is_numeric($csvrow[1])){			$wght = $csvrow[1];			$pr1 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[2]));			$pr2 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[3]));			$skuv = NULL;			foreach($larr as $ln){				if($pi<$lst){++$pi; continue;}	//			if($pi>=$lnd){break;}				$price = 0;				$sku = NULL;				if(preg_match('/(.*)(\*)(.*)/',$csvrow[0], $m)){					if(($m[3]==' Shaker & Torrance ONLY' OR $m[3]==' Excludes Casselberry') AND ($ln=='CW' OR $ln=='CS')) { continue; }					if($m[3]==' Casselberry ONLY' AND ($ln=='SW' OR $ln=='SA' OR $ln=='SD' OR $ln=='SG' OR $ln=='SC' OR $ln=='TW'))	{ continue; }					$skuv = $m[1]; $sku='U-'.$ln.'-'.$skuv; 					}				else{ $skuv = $csvrow[0]; $sku = 'U-'.$ln.'-'.$skuv; }								if($ln=='SW' OR $ln=='SA' OR $ln=='SD' OR $ln=='SG'){ if($pr1){$price = $pr1;} else{continue;} }				if($ln=='SC' OR $ln=='CW' OR $ln=='CS' OR $ln=='TW'){ if($pr2){$price = $pr2;} else{continue;} }				$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$sku.'</td>	<td>'.$price.'</td>	<td>'.$wght.'</td></tr>'; 				$hf .= $skuv.'::'.$ln.'::'.''.'::'.''.'::'.$sku.'::'.$price.'::'.$wght.'::'.''.'---';					}			}		}	}	if($vnd=='USCD0'){       ////////////////////////////////////////  US Cabinet Depot (Frameless)  //////////////////////////		$larr = array('TDW','TGW','TWP','VPB','VSG','VMN','PGW');	foreach($csvarr as $csvrow){		//		echo $csvrow[1].' - '.$csvrow[2].' - '.$csvrow[3].' - '.$csvrow[4].' - '.$csvrow[5].'<br>';				if(is_numeric($csvrow[1])){			$wght = $csvrow[1];			$pr1 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[2]));			$pr2 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[3]));			$pr3 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[4]));			$pr4 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[5]));			// $prr = explode(' ', $csvrow[3]);			// $pr2 = intval(preg_replace('/[\$\s\,]*/','',$prr[0]));			// $pr3 = intval(preg_replace('/[\$\s\,]*/','',$prr[1]));			// $pr4 = intval(preg_replace('/[\$\s\,]*/','',$csvrow[4]));		//	$skuv = NULL;			foreach($larr as $ln){				if($pi<$lst){++$pi; continue;}								$price = 0;		//		$skuv = $csvrow[0];				$sku = $ln.'-'.$csvrow[0];				if($ln=='TDW' OR $ln=='TGW' OR $ln=='TWP')	{ if($pr1){$price = $pr1;} else{continue;} }				if($ln=='VPB' OR $ln=='VSG')				{ if($pr2){$price = $pr2;} else{continue;} }				if($ln=='VMN')								{ if($pr3){$price = $pr3;} else{continue;} }				if($ln=='PGW')								{ if($pr4){$price = $pr4;} else{continue;} }				// if($ln=='TDW' OR $ln=='TGW' OR $ln=='TWP' OR $ln=='ROS' OR $ln=='RCS'){ if($pr1){$price = $pr1;} else{continue;} }				// if($ln=='VPB' OR $ln=='VSG'){ if($pr2){$price = $pr2;} else{continue;} }				// if($ln=='VMN'){ if($pr3){$price = $pr3;} else{continue;} }				// if($ln=='PGW'){ if($pr4){$price = $pr4;} else{continue;} }						$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$sku.'</td>	<td>'.$price.'</td>	<td>'.$wght.'</td></tr>';				$hf .= $csvrow[0].'::'.$ln.'::'.''.'::'.''.'::'.$sku.'::'.$price.'::'.$wght.'::'.''.'---';					}			}		}	}	$st = 5000;$nd = 10000;$iv = 0; if($vnd=='WLF'){       ////////////////////////////////////////  Wolf Classic  //////////////////////////	$larr = array();$pcnt .= '<tr><th></th>	<th>Material #</th>	<th>Sku (Nomenclature)</th>	<th>Title</th>	<th>Short Data</th>	<th>Price</th>	<th>Weight</th>	<th>Volume</th>	<th>BarCode</th></tr>';	foreach($csvarr as $csvrow){		if(is_numeric($csvrow[1])){			$ln = sprintf("%03d", $csvrow[3]);			$ttl = $csvrow[5];			$shd = $csvrow[2];			$sku = ($csvrow[14]=='Y')?'WC-'.$ln.'-'.$csvrow[4].'-SO':'WC-'.$ln.'-'.$csvrow[4].'-ST';			$wght = floatval($csvrow[10]);			$vol = floatval($csvrow[8]);			$price = floatval($csvrow[12]);			$skuv = $csvrow[1];							$pcnt .= '<tr><td style="color: #999;">'.++$pi.'.</td>	<td>'.$skuv.'</td>	<td>'.$sku.'</td>	<td>'.$ttl.'</td>	<td>'.$shd.'</td>	<td>'.$price.'</td>	<td>'.$wght.'</td>	<td>'.$vol.'</td>	<td>'.$csvrow[13].'</td></tr>'; 			if($iv>=$st AND $iv<$nd) {			$hf .= $skuv.'::'.$ln.'::'.$ttl.'::'.$shd.'::'.$sku.'::'.$price.'::'.$wght.'::'.$vol.'::'.$csvrow[13].'::'.''.'---'; 		}				$iv++;			}		}	}	$pcnt .= '</table>'.$hf;}$pcnt .= '<input type="hidden" name="sarray" value="'.$hf.'" /><input type="hidden" name="vendor" value="'.$vnd.'" /></form>';if(isset($_POST['UpTbl'])){	$vendor = (isset($_POST['vendor']))?$_POST['vendor']:NULL;	if($vendor){//	if(0){		if($vendor=='CNC'){}//		else{ mysqli_query($dbh, "DELETE FROM cr_vndpl WHERE Vnd='$vendor'") or die("DB update failed: " . mysqli_connect_error()); }		$br1 = explode('---', $_POST['sarray']);///*		foreach ($br1 as $v1){//			echo $v1 . '<br>';						$br2 = explode('::', $v1);			if($br2[0]){//				foreach($br2 as $n=>$d){ $br2[$n]=($br2[$n])?$br2[$n]:NULL; }				//				if(mysqli_fetch_array(mysqli_query($dbh, "SELECT * FROM cr_vndpl WHERE Vnd='$vendor' AND Sku='$br2[0]' AND Ln='$br2[1]'"))) { continue; }//				if(0) { continue; }//				else{//					$q = "INSERT INTO cr_vndpl( Vnd, Sku, Ln, Title, SkuWC, VPr, UData	) 					$q = "INSERT INTO cr_vndpl( Vnd, Sku, Ln, Title, ShDt, SkuWC, VPr, Weight, Volume, BCode, UData	) 							VALUES ( '$vendor',							'" . mysqli_escape_string($dbh, $br2[0] ) . "',							'" . mysqli_escape_string($dbh, $br2[1] ) . "',							'" . mysqli_escape_string($dbh, $br2[2] ) . "',							'" . mysqli_escape_string($dbh, $br2[3] ) . "',							'" . mysqli_escape_string($dbh, $br2[4] ) . "',							'" . mysqli_escape_string($dbh, $br2[5] ) . "',							'" . mysqli_escape_string($dbh, $br2[6] ) . "',							'" . mysqli_escape_string($dbh, $br2[7] ) . "',							'" . mysqli_escape_string($dbh, $br2[8] ) . "',							'" . mysqli_escape_string($dbh, $br2[9] ) . "' )";//drc($q);					mysqli_query($dbh, $q) or die("DB update failed: " . mysqli_error($dbh));//$iv++;//					}				}			}////////// */								$pcnt .= '<div style="clear: both; padding-top: 50px; color: #090; font: bold 15px \'Arial\'">Price list submitted</div>';		}	}////////////////////////// */$page_title = 'Vendor Catalog Price';$head_ext = '';$hsct = 'plupd';$pgcontent = <<<EOD__<!-- Page content start -->$pcnt<!-- Page content end -->EOD__;require_once('inc/_shell.php'); ///function uptable_vndpl($vendor){ global $dbh;		$i = 0;//		mysqli_query($dbh, "DELETE FROM	cr_vndpl WHERE Vnd='$vendor'") or die("DB update failed: " . mysqli_connect_error());				$result = mysqli_query($dbh, "SELECT * FROM cr_vndpl WHERE Vnd='$vendor' ORDER BY ID ASC");				while ($row = mysqli_fetch_row($result)) {					echo ++$i.'. - '.$row[2].'<br>';					}	}?>