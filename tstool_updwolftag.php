<?phprequire_once('inc/_init.php');require_once('inc/functions/general.php');if($lghsh['Id'] == 0){	require_once('inc/functions/authorization.php'); 	$pgcontent = logform(); 	}include_once 'inc/functions.php';include_once 'wconfig.php';setlocale(LC_MONETARY, 'en_US');error_reporting(E_ALL | E_STRICT);//error_reporting(E_ERROR | E_WARNING | E_PARSE);///////////////////////////////////////////////////////////////////////////////$ln = 'wolf'; //(isset($_GET['br']))?$_GET['br']:NULL;$postp = NULL;$dflag = true;ini_set('memory_limit', '2048M');set_time_limit ( 1500 );$ofs = 0;$ppp  = 10000;$i=0;$wsiarr = getwsline($ln, $ppp, $ofs); /// Get items array from website by brand name (Sku, Title, Regular price, Sale price) /////////////////foreach($wsiarr as $ii){	$prod = wc_get_product($ii->ID);	if(preg_match('/cabinet-base/', $prod->slug)){		$tags = $termsprev = array();//		echo ++$i.'. '.$prod->sku.' - - - '.$prod->slug.' - - - ';				$terms = get_the_terms( $ii->ID, 'product_tag' );		$flag = 0;		if(preg_match('/(5023-BEC)/', $prod->sku, $m)){//		if(1){			foreach ( $terms as $term ) {				$tag = $term->slug;	///*				array_push($termsprev, $tag);				if($tag == 'base-ud'){ //					array_push($tags, 'base-cabinet');					$flag = 1;					}				else{ array_push($tags, $tag); }					if($tag == 'base-ada'){ //					array_push($tags, 'base-ada');//					$flag = 1;					}//				else{ array_push($tags, $tag); }////////// */				//				array_push($tags, $tag);					//	if(1){	//		$tag = 'vanity';	//		array_push($tags, 'height-'.$m[3]);				}					if($flag){				echo ++$i.'. '.$prod->sku.' - - - '.$prod->slug.' _____from_____ ';//			array_push($tags, 'base-ada');				$tgsinit = join(',', $termsprev);				$tgs = join(',', $tags);				echo $tgsinit.' _____to_____   '.$tgs.'<br>';			//	wp_set_object_terms($ii->ID, $tags, 'product_tag');					}			}//		$tgs = join(',', $tags);//		echo $tgs;		if($flag){//			$tgs = join(',', $tags);//			echo $tgs;//			wp_set_object_terms($ii->ID, $tags, 'product_tag');				}//		echo '<br>';		}	}exit;//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////function get_wsku($wsiarr, $sku) {	foreach($wsiarr as $wi){		$skt = preg_replace('/ NEW/','',$sku);		if($skt == $wi['sku']){	return $wi;	}		}	return null;}function getvendorptbl($s){ global $dbh;	return mysqli_fetch_assoc(mysqli_query($dbh, "SELECT Sku, VPr FROM cr_vndpl WHERE SkuWC='$s'"));}function getwsline($line, $ppp, $offs){if(!$line){return NULL;}$inc=0;	$itarr = array();$args = array(	'post_type'             => 'product',	'post_status'           => 'publish',//	'fields' => 'ids',//	'fields' => 'sku',	'ignore_sticky_posts'   => 1,	'offset' 				=> $offs,	'posts_per_page'        => $ppp,	'tax_query' => array(		array(			'taxonomy' => 'product_tag',			'field' => 'slug',			'terms' => $line,			'operator' => 'IN',			)		),	);//$items = get_posts_fields( $args ); $items = get_posts( $args ); return $items; }?>